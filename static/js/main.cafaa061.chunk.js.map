{"version":3,"sources":["classes/Dataset.ts","Filter/Filter.tsx","GraphTimeStackedBar/GraphTimeStackedBar.tsx","svg/sunrise_empty.svg","svg/sunrise_filled.svg","svg/day_empty.svg","svg/day_filled.svg","svg/evening_empty.svg","svg/evening_filled.svg","svg/night_empty.svg","svg/night_filled.svg","GraphTimeGraphics/GraphTimeGraphics.tsx","GraphVisionZeroLine/GraphVisionZeroLine.tsx","GraphCityCompare/GraphCityCompare.tsx","App/index.tsx","index.tsx"],"names":["Dataset","data","date","time","injury","sex","age","this","Number","Date","dateObject","toISOString","Filter","state","ready","currentSetting","status","city","dataSources","name","link","cityOptions","label","className","value","statusOptions","sexOptions","ageOptions","onChange","selected","group","bubbleOnChange","props","setState","toggleAllAges","length","map","initialFilters","Group","options","event","type","onClick","size","bordered","dataSource","renderItem","item","Item","href","rel","target","React","Component","GraphTimeStackedBar","twelveTime","formatNumber","toString","replace","sizing","height","margin","textStyle","color","width","finalData","dataByTime","domWrapper","document","querySelector","firstChild","removeChild","yScale","d3","range","domain","d","total","xScale","padding","categories","series","keys","svgGroup","append","attr","selectAll","enter","key","join","bandwidth","on","transition","duration","style","pageX","pageY","window","scrollY","text","Killed","Injured","call","tickFormat","ticks","prevProps","forceUpdate","setupDom","filters","timeGroups","xGroups","groupMap","Map","forEach","set","hour","split","i","get","Array","from","entries","GraphTimeGraphics","morning","day","evening","night","returnData","Object","indexOf","parseData","backgroundImage","sunrise_filled","sunrise_empty","Math","round","day_filled","day_empty","evening_filled","evening_empty","night_filled","night_empty","GraphVisionZeroLine","sortDates","a","b","getTime","dayMap","month","getFullYear","getMonth","foundItem","newItem","values","sort","nycData","chicagoData","laData","dataNYC","getTotalByMonth","dataChicago","dataLa","datum","x","y","yLabel","cities","push","GraphCityCompare","filter","App","loading","error","forceGraphUpdate","graphLoading","filterOpen","currentTimeout","resizeTimeout","dataSets","nyc","chicago","losAngeles","filterSetttings","filterChange","newFilters","clearTimeout","setTimeout","undefined","addEventListener","body","clientWidth","then","catch","console","specificCity","validAges","ageGroup","JSON","parse","filterData","dataSet","concat","mobileVersion","primaryContent","filterDrawer","title","subTitle","extra","location","reload","closable","visible","onClose","header","footer","widthToUse","allowNyc","allowChicago","allowLosAngeles","graphLoadingScreen","getDataToUse","listOfVisionZeroChanges","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cafaa061.chunk.js","sourcesContent":["export default class Dataset {\n  /** The date of accident.  In MM/DD/YYYY */\n  date: string;\n  /** The time of accident.  In HH:MM (24 hour) */\n  time: string;\n  /** Injury level  */\n  injury: 'NONE'|'INJURED'|'KILLED';\n  /** The sex of the victim */\n  sex: 'M'|'F'|'X';\n  /** The age of the victim */\n  age: number;\n\n  constructor(data: Dataset) {\n    this.date = data.date;\n    this.time = data.time;\n    this.injury = data.injury;\n    this.sex = data.sex || 'X';\n    this.age = Number(data.age || 0);\n    // Some age data is super large (6000+.  102 is only real sounding age. Maxing out at that (maybe bad data))\n    if (this.age > 102 || this.age < 0) this.age = 0;\n  }\n\n  /** JavaScript Date object including date and time of accident */\n  get dateObject(): Date {\n    return new Date(`${this.date} ${this.time}`);\n  }\n\n  /** ISO string including date and time of accident */\n  get dateString(): string {\n    return this.dateObject.toISOString();\n  }\n}\n","import './Filter.scss';\nimport React from 'react';\nimport {Button, Checkbox, Divider, List} from 'antd';\nimport {CheckboxValueType} from 'antd/lib/checkbox/Group';\n\nexport interface FilterSettings {\n  status: string[];\n  age: string[];\n  city: string[];\n  sex: string[];\n}\n\nexport interface FilterProps {\n  /** onChange function to call whenever filters change */\n  onChange: ((settings: FilterSettings) => void);\n  /** Initial filters to set on init */\n  initialFilters: FilterSettings;\n}\n\nexport default class Filter extends React.Component<FilterProps> {\n  state = {\n    /** Default value does not update after render. So don't render until props are read in. */\n    ready: false,\n  }\n\n  currentSetting: FilterSettings = {\n    status: [],\n    age: [],\n    city: [],\n    sex: [],\n  };\n\n  dataSources = [\n    {name: 'New York City Data Source', link: 'https://data.cityofnewyork.us/Public-Safety/Motor-Vehicle-Collisions-Person/f55k-p6yu'},\n    {name: 'Los Angeles Data Source', link: 'https://data.lacity.org/A-Safe-City/Traffic-Collision-Data-from-2010-to-Present/d5tf-ez2w'},\n    {name: 'Chicago Data Source', link: 'https://data.cityofchicago.org/Transportation/Traffic-Crashes-People/u6pd-qa9d'},\n    {name: 'New York City Vision Zero', link: 'https://www1.nyc.gov/content/visionzero/pages/'},\n    {name: 'Los Angeles Vision Zero', link: 'https://pw.lacounty.gov/visionzero/'},\n    {name: 'Chicago Vision Zero', link: 'https://www.chicago.gov/city/en/depts/cdot/supp_info/vision-zero-chicago.html'},\n  ]\n\n  cityOptions = [\n    {label: <span className=\"checkbox-label-color nyc\">New York City</span>, value: 'nyc'},\n    {label: <span className=\"checkbox-label-color la\">Los Angeles, California</span>, value: 'losAngeles'},\n    {label: <span className=\"checkbox-label-color chicago\">Chicago, Illinois</span>, value: 'chicago'},\n  ];\n\n  statusOptions = [\n    {label: <span className=\"checkbox-label-color killed\">Killed (including deceased from injuries)</span>, value: 'KILLED'},\n    {label: <span className=\"checkbox-label-color injured\">Injured (reported or visible)</span>, value: 'INJURED'},\n    {label: <span className=\"checkbox-label-color none\">Not hurt (no report of injury)</span>, value: 'NONE'},\n  ];\n\n  sexOptions = [\n    {label: 'Female', value: 'F'},\n    {label: 'Male', value: 'M'},\n    {label: 'Unknown/Other', value: 'X'},\n  ];\n\n  ageOptions = [\n    {label: 'Unknown', value: '[0]'},\n    {label: 'Toddler (1-3)', value: '[1,2,3]'},\n    {label: 'Pre Schoolers (4-6)', value: '[4,5,6]'},\n    {label: 'Primary Schoolers (7-8)', value: '[7,8]'},\n    {label: 'Elementary Schoolers (9-11)', value: '[9,10,11]'},\n    {label: 'Middle Schoolers (12-14)', value: '[12,13,14]'},\n    {label: 'High Schoolers (15-18)', value: '[15,16,17,18]'},\n    {label: 'College Age (19-23)', value: '[19,20,21,22,23]'},\n    {label: 'Young Adult (24-30)', value: '[24,25,26,27,28,29,30]'},\n    {label: 'Adult (31-45)', value: '[31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]'},\n    {label: 'Middle Age (46-60)', value: '[46,47,48,49,50,51,52,53,54,55,56,57,58,59,60]'},\n    {label: 'Senior (61-80)', value: '[61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80]'},\n    {label: 'Senior (81+)', value: '[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102]'},\n  ];\n\n  onChange = (selected: CheckboxValueType[], group: 'status'|'age'|'city'|'sex'): void => {\n    this.currentSetting[group] = selected as string[];\n    this.bubbleOnChange();\n  }\n\n  bubbleOnChange = (): void => {\n    const {onChange} = this.props;\n    this.setState({});\n    onChange(this.currentSetting);\n  }\n\n  toggleAllAges = (): void => {\n    if (this.currentSetting.age.length >= (this.ageOptions.length / 2)) {\n      this.currentSetting.age = [];\n    } else {\n      this.currentSetting.age = this.ageOptions.map(age => age.value);\n    }\n    this.bubbleOnChange();\n  }\n\n  componentDidMount(): void {\n    const {initialFilters} = this.props;\n    this.currentSetting = initialFilters;\n    this.setState({ready: true});\n  }\n\n  render(): React.ReactNode {\n    const {ready} = this.state;\n    return ready ? (\n      <div className=\"filter-wrapper\">\n        <div className=\"label\">Status of individual</div>\n        <Checkbox.Group options={this.statusOptions} value={this.currentSetting.status} onChange={event => this.onChange(event, 'status')} />\n        <div className=\"label\">Age of individual</div>\n        <Button type=\"link\" onClick={this.toggleAllAges}>Toggle all</Button>\n        <Checkbox.Group className=\"has-toggle-button\" options={this.ageOptions} value={this.currentSetting.age} onChange={event => this.onChange(event, 'age')} />\n        <div className=\"label\">Gender of individual</div>\n        <Checkbox.Group options={this.sexOptions} value={this.currentSetting.sex} onChange={event => this.onChange(event, 'sex')} />\n        <div className=\"label\">Cities to include</div>\n        <div className=\"helper-text\">This study focuses on New York City, but for comparison other cities are available.</div>\n        <Checkbox.Group options={this.cityOptions} value={this.currentSetting.city} onChange={event => this.onChange(event, 'city')} />\n        <Divider />\n        <div className=\"label\">Data Sources and Citations</div>\n        <List size=\"small\" bordered={true} dataSource={this.dataSources} renderItem={(item: {name: string; link: string}) => <List.Item><a href={item.link} rel=\"noreferrer\" target=\"_blank\">{item.name}</a></List.Item>} />\n        <br />\n      </div>\n    ) : null;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport * as d3 from 'd3';\nimport Dataset from '../classes/Dataset';\nimport {Radio} from 'antd';\n\nexport interface GraphTimeStackedBarProps {\n  /** Data to render */\n  data: Dataset[];\n  /** Indicator to update graph based on didUpdate (to avoid data check). */\n  forceUpdate: number;\n  /** Width to use for the graph */\n  width: number;\n}\n\nexport default class GraphTimeStackedBar extends React.Component<GraphTimeStackedBarProps> {\n  twelveTime = true;\n  formatNumber = (value: number): string => {\n    return value.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n  }\n\n  get xGroups(): {name: string; range: number[]}[] {\n    return [\n      {\n        name: this.twelveTime ? '12am - 1am' : '0 - 1',\n        range: [0, 1],\n      },\n      {\n        name: this.twelveTime ? '2am - 3am' : '2 - 3',\n        range: [2, 3],\n      },\n      {\n        name: this.twelveTime ? '4am - 5am' : '4 - 5',\n        range: [4, 5],\n      },\n      {\n        name: this.twelveTime ? '6am - 7am' : '6 - 7',\n        range: [6, 7],\n      },\n      {\n        name: this.twelveTime ? '8am - 9am' : '8 - 9',\n        range: [8, 9],\n      },\n      {\n        name: this.twelveTime ? '10am - 11am' : '10 - 11',\n        range: [10, 11],\n      },\n      {\n        name: this.twelveTime ? '12pm - 1pm' : '12 - 13',\n        range: [12, 13],\n      },\n      {\n        name: this.twelveTime ? '2pm - 3pm' : '14 - 15',\n        range: [14, 15],\n      },\n      {\n        name: this.twelveTime ? '4pm - 5pm' : '16 - 17',\n        range: [16, 17],\n      },\n      {\n        name: this.twelveTime ? '6pm - 7pm' : '18 - 19',\n        range: [18, 19],\n      },\n      {\n        name: this.twelveTime ? '8pm - 9pm' : '20 - 21',\n        range: [20, 21],\n      },\n      {\n        name: this.twelveTime ? '10pm - 12am' : '22 - 0',\n        range: [22, 24],\n      },\n    ];\n  }\n\n  sizing = {\n    height: 500,\n    margin: 150,\n  };\n\n  textStyle = {\n    color: '#292929',\n    size: '16px',\n  };\n\n  get dataByTime(): {name: string; total: number; ['Killed']: number; ['Injured']: number; ['Not hurt']: number}[] {\n    const {data} = this.props;\n    const timeGroups = this.xGroups;\n    const groupMap: Map<string, {total: number; ['Killed']: number; ['Injured']: number; ['Not hurt']: number; range: number[]}> = new Map();\n    timeGroups.forEach(group => {\n      return groupMap.set(group.name, {total: 0, Killed: 0, Injured: 0, 'Not hurt': 0, range: group.range});\n    });\n    data.forEach(item => {\n      const hour = Number(item.time.split(':')[0]);\n      for (let i = 0; i < timeGroups.length; i++) {\n        if (hour >= timeGroups[i].range[0] && hour <= timeGroups[i].range[1]) {\n          const value = groupMap.get(timeGroups[i].name);\n          if (value) {\n            value.total++;\n            if (item.injury === 'INJURED') value.Injured++;\n            if (item.injury === 'KILLED') value.Killed++;\n            if (item.injury === 'NONE') value['Not hurt']++;\n          }\n        }\n      }\n    });\n\n    return Array.from(groupMap.entries()).map(time => {\n      return {\n        name: time[0],\n        total: time[1].total,\n        Killed: time[1].Killed,\n        Injured: time[1].Injured,\n        'Not hurt': time[1]['Not hurt'],\n      };\n    });\n  }\n\n  setupDom(): void {\n    const {width} = this.props;\n    const finalData = this.dataByTime;\n\n    const domWrapper = document.querySelector('.graph-time-stacked-bar .graph-area');\n    if (domWrapper) {\n      while (domWrapper.firstChild) {\n        domWrapper.removeChild(domWrapper.firstChild);\n      }\n    }\n\n    const yScale = d3.scaleLinear()\n      .range([this.sizing.height - this.sizing.margin, 0])\n      .domain([0, d3.max(finalData, d => d.total) || 100]);\n\n    const xScale = d3.scaleBand()\n      .range([0, width - this.sizing.margin])\n      .domain(finalData.map(d => d.name))\n      .padding(0.2);\n\n    const categories = ['Not hurt', 'Injured', 'Killed'];\n\n    const color = d3.scaleOrdinal()\n      .domain(categories)\n      .range(['#EF5C84', '#FFA500', '#800080']);\n\n    const series = d3.stack().keys(categories)(finalData as any);\n\n    const svgElement = d3\n      .select('.graph-time-stacked-bar .graph-area')\n      .append('svg')\n      .attr('width', `${width}px`)\n      .attr('height', `${this.sizing.height}px`);\n\n    const svgGroup = svgElement.append('g')\n      .attr('transform', `translate(${this.sizing.margin / 2}, ${this.sizing.margin / 2})`);\n\n    const rects = svgGroup.selectAll('g')\n      .data(series)\n      .enter()\n      .append('g')\n      .attr('fill', d => color(d.key) as string);\n\n    rects.selectAll('rect')\n      .data((d: any) => d)\n      .join('rect')\n      .attr('x', (d: any) => xScale(d.data.name) || '')\n      .attr('y', (d: any) => yScale(d[1]))\n      .attr('height', (d: any) => yScale(d[0]) - yScale(d[1]))\n      .attr('width', xScale.bandwidth())\n      .on('mouseover', (event, d: any) => {\n        d3.select('#tooltip-wrapper')\n          .transition()\n          .duration(300)\n          .style('opacity', 1)\n          .style('left', `${event.pageX + 4}px`)\n          .style('top', `${(event.pageY - window.scrollY) + 4}px`)\n          .text(`Killed: ${this.formatNumber(d.data.Killed)}\\nInjured: ${this.formatNumber(d.data.Injured)}\\nNot hurt: ${this.formatNumber(d.data['Not hurt'])}`);\n      })\n      .on('mouseout', () => {\n        d3.select('#tooltip-wrapper')\n          .transition()\n          .style('opacity', 0);\n      })\n      .on('mousemove', event => {\n        d3.select('#tooltip-wrapper')\n          .style('left', `${event.pageX + 4}px`)\n          .style('top', `${(event.pageY - window.scrollY) + 4}px`);\n      });\n\n    svgGroup.append('g')\n      .attr('transform', `translate(0, ${this.sizing.height - this.sizing.margin})`)\n      .call(d3.axisBottom(xScale))\n      .attr('class', 'rotate-mobile')\n      .append('text')\n      .attr('y', 50)\n      .attr('x', (width - this.sizing.margin) / 2)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', this.textStyle.size)\n      .attr('fill', this.textStyle.color)\n      .text('Time of Day');\n\n    svgGroup.append('g')\n      .call(d3.axisLeft(yScale).tickFormat(d => `${this.formatNumber(d as number)}`).ticks(8))\n      .append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('y', -60)\n      .attr('x', -(this.sizing.height / 3))\n      .attr('text-anchor', 'middle')\n      .attr('font-size', this.textStyle.size)\n      .attr('fill', this.textStyle.color)\n      .text('Total');\n  }\n\n  get filters(): React.ReactNode {\n    return (\n      <Radio.Group\n        value={this.twelveTime}\n        onChange={event => {\n          this.twelveTime = event.target.value;\n          this.setupDom();\n          this.setState({});\n        }}\n      >\n        <Radio value={false}>24 Hour Time</Radio>\n        <Radio value={true}>12 Hour Time</Radio>\n      </Radio.Group>\n    );\n  }\n\n  componentDidUpdate(prevProps: GraphTimeStackedBarProps): void {\n    const {forceUpdate, width} = this.props;\n    if (forceUpdate !== prevProps.forceUpdate || width !== prevProps.width) this.setupDom();\n  }\n\n  componentDidMount(): void {\n    this.setupDom();\n  }\n\n  render(): React.ReactNode {\n    return (\n      <div className=\"graph-wrapper graph-time-stacked-bar\">\n        <div className=\"graph-area\"></div>\n        <div className=\"graph-specific-filters\">{this.filters}</div>\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/sunrise_empty.a2deba2c.svg\";","export default __webpack_public_path__ + \"static/media/sunrise_filled.708ddd88.svg\";","export default __webpack_public_path__ + \"static/media/day_empty.11a3a0df.svg\";","export default __webpack_public_path__ + \"static/media/day_filled.b42004e0.svg\";","export default __webpack_public_path__ + \"static/media/evening_empty.1da8b408.svg\";","export default __webpack_public_path__ + \"static/media/evening_filled.047d29f5.svg\";","export default __webpack_public_path__ + \"static/media/night_empty.7cbd1677.svg\";","export default __webpack_public_path__ + \"static/media/night_filled.bcde4133.svg\";","import React from 'react';\nimport './GraphTimeGraphics.scss';\nimport Dataset from '../classes/Dataset';\nimport sunrise_empty from '../svg/sunrise_empty.svg';\nimport sunrise_filled from '../svg/sunrise_filled.svg';\nimport day_empty from '../svg/day_empty.svg';\nimport day_filled from '../svg/day_filled.svg';\nimport evening_empty from '../svg/evening_empty.svg';\nimport evening_filled from '../svg/evening_filled.svg';\nimport night_empty from '../svg/night_empty.svg';\nimport night_filled from '../svg/night_filled.svg';\n\nexport interface GraphTimeGraphicsProps {\n  /** Data to render */\n  data: Dataset[];\n  /** Indicator to update graph based on didUpdate (to avoid data check). */\n  forceUpdate: number;\n  /** Width to use for the graph */\n  width: number;\n}\n\nexport type TimeGroups = 'morning'|'day'|'evening'|'night';\n\nexport default class GraphTimeGraphics extends React.Component<GraphTimeGraphicsProps> {\n  timeGroups = {\n    morning: [4, 5, 6, 7, 8, 9, 10],\n    day: [11, 12, 13, 14, 15],\n    evening: [16, 17, 18, 19, 20],\n    night: [21, 22, 23, 0, 1, 2, 3],\n  }\n\n  parseData(): {morning: number; day: number; evening: number; night: number} {\n    const {data} = this.props;\n    const returnData = {\n      morning: 0,\n      day: 0,\n      evening: 0,\n      night: 0,\n    };\n\n    data.forEach(item => {\n      const hour = Number(item.time.split(':')[0]);\n      Object.keys(returnData).forEach((key) => {\n        if (this.timeGroups[key as TimeGroups].indexOf(hour) > -1) returnData[key as TimeGroups]++;\n      });\n    });\n\n    return {\n      morning: data.length ? (returnData.morning / data.length) * 100 : 0,\n      day: data.length ? (returnData.day / data.length) * 100 : 0,\n      evening: data.length ? (returnData.evening / data.length) * 100 : 0,\n      night: data.length ? (returnData.night / data.length) * 100 : 0,\n    };\n\n  }\n\n  componentDidUpdate(prevProps: GraphTimeGraphicsProps): void {\n    const {forceUpdate, width} = this.props;\n    if (forceUpdate !== prevProps.forceUpdate || width !== prevProps.width) this.setState({});\n  }\n\n  render(): React.ReactNode {\n    const finalData = this.parseData();\n    return (\n      <div className=\"graph-wrapper graph-time-graphics\">\n        <div className=\"graphic-wrapper\">\n          <div className=\"image-wrapper\">\n            <div className=\"overlay\" style={{backgroundImage: `url(${sunrise_filled})`, width: `${finalData.morning}%`}}></div>\n            <div className=\"background\" style={{backgroundImage: `url(${sunrise_empty})`}}></div>\n            <div className=\"text\">Morning ({Math.round(finalData.morning)}%)</div>\n          </div>\n          <div className=\"image-wrapper\">\n            <div className=\"overlay\" style={{backgroundImage: `url(${day_filled})`, width: `${finalData.day}%`}}></div>\n            <div className=\"background\" style={{backgroundImage: `url(${day_empty})`}}></div>\n            <div className=\"text\">Day ({Math.round(finalData.day)}%)</div>\n          </div>\n          <div className=\"image-wrapper\">\n            <div className=\"overlay\" style={{backgroundImage: `url(${evening_filled})`, width: `${finalData.evening}%`}}></div>\n            <div className=\"background\" style={{backgroundImage: `url(${evening_empty})`}}></div>\n            <div className=\"text\">Evening ({Math.round(finalData.evening)}%)</div>\n          </div>\n          <div className=\"image-wrapper\">\n            <div className=\"overlay\" style={{backgroundImage: `url(${night_filled})`, width: `${finalData.night}%`}}></div>\n            <div className=\"background\" style={{backgroundImage: `url(${night_empty})`}}></div>\n            <div className=\"text\">Night ({Math.round(finalData.night)}%)</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport * as d3 from 'd3';\nimport Dataset from '../classes/Dataset';\n\nexport interface GraphVisionZeroLineProps {\n  /** Data for NYC to render */\n  nycData: Dataset[];\n  /** Data for Chicaco to render */\n  chicagoData: Dataset[];\n  /** Data for Los Angeles to render */\n  laData: Dataset[];\n  /** Indicator to update graph based on didUpdate (to avoid data check). */\n  forceUpdate: number;\n  /** Width to use for the graph */\n  width: number;\n}\n\nexport default class GraphVisionZeroLine extends React.Component<GraphVisionZeroLineProps> {\n  sizing = {\n    height: 500,\n    margin: 150,\n  };\n\n  textStyle = {\n    color: '#292929',\n    size: '16px',\n  };\n\n  formatNumber = (value: number): string => {\n    return value.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n  }\n\n  sortDates = (a: {date: Date}, b: {date: Date}): number => {\n    return b.date.getTime() - a.date.getTime();\n  }\n\n  getTotalByMonth(data: Dataset[]): {total: number; date: Date}[] {\n    const dayMap: Map<string, {total: number; date: Date}> = new Map();\n\n    data.forEach(d => {\n      const month = new Date(d.dateObject.getFullYear(), d.dateObject.getMonth(), 1);\n      const key = `${d.dateObject.getFullYear()}-${d.dateObject.getMonth()}`;\n      const foundItem = dayMap.get(key);\n      if (foundItem) {\n        foundItem.total++;\n      } else {\n        const newItem = {\n          total: 1,\n          date: month,\n        };\n        dayMap.set(key, newItem);\n      }\n    });\n\n    return Array.from(dayMap.values()).sort(this.sortDates);\n  }\n\n  get yLabel(): string {\n    const {nycData, chicagoData, laData} = this.props;\n    const cities = [];\n\n    if (nycData.length) cities.push('New York City');\n    if (laData.length) cities.push('Los Angeles');\n    if (chicagoData.length) cities.push('Chicago');\n\n    return cities.length ? `Total in ${cities.join(', ')}` : 'Total';\n  }\n\n  setupDom(): void {\n    const {width, nycData, chicagoData, laData} = this.props;\n\n    const dataNYC = this.getTotalByMonth(nycData);\n    const dataChicago = this.getTotalByMonth(chicagoData);\n    const dataLa = this.getTotalByMonth(laData);\n\n    const domWrapper = document.querySelector('.graph-time-vision-zero-line .graph-area');\n    if (domWrapper) {\n      while (domWrapper.firstChild) {\n        domWrapper.removeChild(domWrapper.firstChild);\n      }\n    }\n\n    const xScale = d3.scaleTime()\n      .domain(d3.extent([...dataNYC, ...dataChicago, ...dataLa].sort(this.sortDates), d => d.date) as any)\n      .range([0, width - this.sizing.margin]);\n\n    const yScale = d3.scaleLinear()\n      .domain([0, d3.max([d3.max(dataNYC, d => +d.total), d3.max(dataChicago, d => +d.total), d3.max(dataLa, d => +d.total)] as any)] as any)\n      .range([this.sizing.height - this.sizing.margin, 0]);\n\n    const svgElement = d3\n      .select('.graph-time-vision-zero-line .graph-area')\n      .append('svg')\n      .attr('width', `${width}px`)\n      .attr('height', `${this.sizing.height}px`);\n\n    const svgGroup = svgElement.append('g')\n      .attr('transform', `translate(${this.sizing.margin / 2}, ${this.sizing.margin / 2})`);\n\n    svgGroup.append('path')\n      .datum(dataNYC)\n      .attr('fill', 'none')\n      .attr('stroke', '#10377b')\n      .attr('stroke-width', 1.5)\n      .attr('d', d3.line().x((d: any) => xScale(d.date)).y((d: any) => yScale(d.total)) as any);\n\n    svgGroup.append('path')\n      .datum(dataChicago)\n      .attr('fill', 'none')\n      .attr('stroke', '#e32f22')\n      .attr('stroke-width', 1.5)\n      .attr('d', d3.line().x((d: any) => xScale(d.date)).y((d: any) => yScale(d.total)) as any);\n\n    svgGroup.append('path')\n      .datum(dataLa)\n      .attr('fill', 'none')\n      .attr('stroke', '#f5bd41')\n      .attr('stroke-width', 1.5)\n      .attr('d', d3.line().x((d: any) => xScale(d.date)).y((d: any) => yScale(d.total)) as any);\n\n    svgGroup.append('g')\n      .attr('transform', `translate(0, ${this.sizing.height - this.sizing.margin})`)\n      .call(d3.axisBottom(xScale).tickFormat(d3.timeFormat(laData.length ? '%Y' : '%b %Y') as any))\n      .attr('class', 'rotate-mobile')\n      .append('text')\n      .attr('y', 50)\n      .attr('x', (width - this.sizing.margin) / 2)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', this.textStyle.size)\n      .attr('fill', this.textStyle.color)\n      .text('Time');\n\n    svgGroup.append('g')\n      .call(d3.axisLeft(yScale).tickFormat(d => `${this.formatNumber(d as number)}`).ticks(8))\n      .append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('y', -60)\n      .attr('x', -(this.sizing.height / 3))\n      .attr('text-anchor', 'middle')\n      .attr('font-size', this.textStyle.size)\n      .attr('fill', this.textStyle.color)\n      .text(this.yLabel);\n  }\n\n  componentDidUpdate(prevProps: GraphVisionZeroLineProps): void {\n    const {forceUpdate, width} = this.props;\n    if (forceUpdate !== prevProps.forceUpdate || width !== prevProps.width) this.setupDom();\n  }\n\n  componentDidMount(): void {\n    this.setupDom();\n  }\n\n  render(): React.ReactNode {\n    return (\n      <div className=\"graph-wrapper graph-time-vision-zero-line\">\n        <div className=\"graph-area\"></div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport * as d3 from 'd3';\nimport Dataset from '../classes/Dataset';\n\nexport interface GraphCityCompareProps {\n  /** Data for NYC to render */\n  nycData: Dataset[];\n  /** Data for Chicaco to render */\n  chicagoData: Dataset[];\n  /** Data for Los Angeles to render */\n  laData: Dataset[];\n  /** Indicator to update graph based on didUpdate (to avoid data check). */\n  forceUpdate: number;\n  /** Width to use for the graph */\n  width: number;\n}\n\nexport default class GraphCityCompare extends React.Component<GraphCityCompareProps> {\n  sizing = {\n    height: 500,\n    margin: 150,\n  };\n\n  textStyle = {\n    color: '#292929',\n    size: '16px',\n  };\n\n  setupDom(): void {\n    const {width, nycData, chicagoData, laData} = this.props;\n\n    const finalData = [\n      {\n        name: 'Los Angeles',\n        color: '#f5bd41',\n        total: laData.filter(d => d.dateObject.getFullYear() >= 2016).length,\n      },\n      {\n        name: 'Chicago',\n        color: '#e32f22',\n        total: chicagoData.filter(d => d.dateObject.getFullYear() >= 2016).length,\n      },\n      {\n        name: 'New York City',\n        color: '#10377b',\n        total: nycData.filter(d => d.dateObject.getFullYear() >= 2016).length,\n      },\n    ];\n\n    const domWrapper = document.querySelector('.graph-time-city-compare .graph-area');\n    if (domWrapper) {\n      while (domWrapper.firstChild) {\n        domWrapper.removeChild(domWrapper.firstChild);\n      }\n    }\n\n    const xScale = d3.scaleLinear()\n      .range([0, width - this.sizing.margin])\n      .domain([0, d3.max(finalData, d => d.total) || 10] as any);\n\n    const yScale = d3.scaleBand()\n      .range([(this.sizing.height - this.sizing.margin), 0])\n      .padding(0.4)\n      .domain(finalData.map(d => d.name));\n\n    const svgElement = d3\n      .select('.graph-time-city-compare .graph-area')\n      .append('svg')\n      .attr('width', `${width - 40}px`)\n      .attr('height', `${this.sizing.height}px`);\n\n    const svgGroup = svgElement.append('g')\n      .attr('transform', `translate(${this.sizing.margin / 2}, ${this.sizing.margin / 2})`);\n\n    svgGroup.selectAll('rect')\n      .data(finalData)\n      .enter().append('rect')\n      .attr('fill', (d: any) => d.color)\n      .attr('width', (d: any) => xScale(d.total))\n      .attr('height', yScale.bandwidth())\n      .attr('y', (d: any) => yScale(d.name) as any);\n\n    svgGroup.append('g')\n      .attr('transform', `translate(0, ${this.sizing.height - this.sizing.margin})`)\n      .call(d3.axisBottom(xScale))\n      .attr('class', 'rotate-mobile');\n\n    svgGroup.append('g')\n      .call(d3.axisLeft(yScale));\n  }\n\n  componentDidUpdate(prevProps: GraphCityCompareProps): void {\n    const {forceUpdate, width} = this.props;\n    if (forceUpdate !== prevProps.forceUpdate || width !== prevProps.width) this.setupDom();\n  }\n\n  componentDidMount(): void {\n    this.setupDom();\n  }\n\n  render(): React.ReactNode {\n    return (\n      <div className=\"graph-wrapper graph-time-city-compare\">\n        <div className=\"graph-area\"></div>\n      </div>\n    );\n  }\n}\n","import './App.scss';\nimport React from 'react';\nimport {Button, Drawer, Result, Spin, List} from 'antd';\nimport * as d3 from 'd3';\nimport Dataset from '../classes/Dataset';\nimport Filter, {FilterSettings} from '../Filter/Filter';\nimport GraphTimeStackedBar from '../GraphTimeStackedBar/GraphTimeStackedBar';\nimport GraphTimeGraphics from '../GraphTimeGraphics/GraphTimeGraphics';\nimport GraphVisionZeroLine from '../GraphVisionZeroLine/GraphVisionZeroLine';\nimport GraphCityCompare from '../GraphCityCompare/GraphCityCompare';\n\nexport default class App extends React.Component {\n  state = {\n    loading: true,\n    error: false,\n    forceGraphUpdate: 0,\n    width: 1100,\n    graphLoading: false,\n    filterOpen: false,\n  }\n\n  currentTimeout: ReturnType<typeof setTimeout>|undefined;\n  resizeTimeout: ReturnType<typeof setTimeout>|undefined;\n\n  dataSets: {nyc: Dataset[]; chicago: Dataset[]; losAngeles: Dataset[]} = {\n    nyc: [],\n    chicago: [],\n    losAngeles: [],\n  };\n\n  filterSetttings: FilterSettings = {\n    status: ['KILLED', 'INJURED', 'NONE'],\n    age: ['[0]', '[1,2,3]', '[4,5,6]', '[7,8]', '[9,10,11]', '[12,13,14]', '[15,16,17,18]', '[19,20,21,22,23]', '[24,25,26,27,28,29,30]', '[31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]', '[46,47,48,49,50,51,52,53,54,55,56,57,58,59,60]', '[61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80]', '[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102]'],\n    sex: ['M', 'F', 'X'],\n    city: ['nyc'],\n  };\n\n  filterChange = (newFilters: FilterSettings): void => {\n    const {forceGraphUpdate} = this.state;\n    this.filterSetttings = newFilters;\n    this.setState({graphLoading: true});\n    if (this.currentTimeout) clearTimeout(this.currentTimeout);\n    this.currentTimeout = setTimeout(() => {\n      this.setState({forceGraphUpdate: forceGraphUpdate + 1, graphLoading: false});\n      this.currentTimeout = undefined;\n    }, 500);\n  }\n\n  get loading(): React.ReactNode {\n    return <Spin size=\"large\" className=\"full-screen-loading\" />;\n  }\n\n  get error(): React.ReactNode {\n    return <Result\n      status=\"error\"\n      title=\"Unable to load data\"\n      subTitle=\"The datasets could not be loaded. Please try reloading the page.\"\n      extra={[\n        <Button\n          type=\"primary\"\n          key=\"reload\"\n          onClick={(): void => {\n            window.location.reload();\n          }}\n        >\n          Reload\n        </Button>,\n      ]}\n    />;\n  }\n\n  get filterDrawer(): React.ReactNode {\n    const {filterOpen} = this.state;\n    return (\n      <Drawer\n        title=\"Filters\"\n        width={380}\n        className={this.mobileVersion ? 'mobile-styles' : ''}\n        closable={this.mobileVersion}\n        visible={this.mobileVersion ? filterOpen : true}\n        onClose={(): void => {\n          if (this.mobileVersion) this.setState({filterOpen: false});\n        }}\n      >\n        <Filter initialFilters={this.filterSetttings} onChange={this.filterChange} />\n      </Drawer>\n    );\n  }\n\n  componentWillUnmount(): void {\n    if (this.currentTimeout) clearTimeout(this.currentTimeout);\n    if (this.resizeTimeout) clearTimeout(this.resizeTimeout);\n  }\n\n  componentDidMount(): void {\n    window.addEventListener('resize', () => {\n      if (this.resizeTimeout) clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = setTimeout(() => {\n        this.setState({width: document.body.clientWidth});\n      }, 300);\n    });\n\n    d3.csv('/vis-final/data/nyc.csv').then((nycData: unknown[]) => {\n      this.dataSets.nyc = nycData.map(data => new Dataset(data as Dataset));\n      d3.csv('/vis-final/data/chicago.csv').then((chicagoData: unknown[]) => {\n        this.dataSets.chicago = chicagoData.map(data => new Dataset(data as Dataset));\n        d3.csv('/vis-final/data/los-angeles.csv').then((laData: unknown[]) => {\n          this.dataSets.losAngeles = laData.map(data => new Dataset(data as Dataset));\n          this.setState({loading: false, width: document.body.clientWidth});\n        }).catch(error => {\n          console.error('Unable to get data for Los Angeles', error);\n          this.setState({loading: false, error: true});\n        });\n      }).catch(error => {\n        console.error('Unable to get data for Chicago', error);\n        this.setState({loading: false, error: true});\n      });\n    }).catch(error => {\n      console.error('Unable to get data for NYC', error);\n      this.setState({loading: false, error: true});\n    });\n  }\n\n  getDataToUse(specificCity?: 'nyc'|'chicago'|'losAngeles'): Dataset[] {\n    let data: Dataset[] = [];\n    const validAges: number[] = [];\n    this.filterSetttings.age.forEach(ageGroup => {\n      const ages: number[] = JSON.parse(ageGroup);\n      ages.forEach(age => {\n        validAges.push(age);\n      });\n    });\n\n    const filterData = (dataSet: Dataset[]): Dataset[] => {\n      return dataSet.filter(item => {\n        return (\n          (validAges.indexOf(item.age) > -1) &&\n          (this.filterSetttings.status.indexOf(item.injury) > -1) &&\n          (this.filterSetttings.sex.indexOf(item.sex) > -1)\n        );\n      });\n    };\n\n    if (specificCity) {\n      data = data.concat(filterData(this.dataSets[specificCity]));\n    } else {\n      this.filterSetttings.city.forEach((city) => {\n        data = data.concat(filterData(this.dataSets[city as ('nyc'|'chicago'|'losAngeles')]));\n      });\n    }\n\n    return data;\n  }\n\n  get mobileVersion(): boolean {\n    const {width} = this.state;\n    return width < 1080;\n  }\n\n  get graphLoadingScreen(): React.ReactNode {\n    return (\n      <div className=\"loading-overlay\">\n        {this.loading}\n      </div>\n    );\n  }\n\n  get listOfVisionZeroChanges(): React.ReactNode {\n    const data: string[] = [\n      '21.4 miles of protected bile lanes installed',\n      '2.3 million notices of liability issued by speed cameras',\n      '120.3 miles of traffic signals retimed',\n      '81,609 summonses issued to drivers for failure to yield',\n      '79 left-turn calming treatments added',\n      '36% decline in pedestrian deaths',\n      '645 school zones protected by speed cameras',\n    ];\n\n    return (\n      <List\n        size=\"small\"\n        className=\"vision-zero-list\"\n        header={<b>Vision Zero Changes (as of 2020)</b>}\n        footer={<i><a href=\"https://www1.nyc.gov/assets/visionzero/downloads/pdf/vision-zero-year-6-report.pdf\" rel=\"noreferrer\" target=\"_blank\">Vision Zero: 6 Year Report (June 2020)</a></i>}\n        bordered={true}\n        dataSource={data}\n        renderItem={item => <List.Item>{item}</List.Item>}\n      />\n    );\n  }\n\n  get primaryContent(): React.ReactNode {\n    const {forceGraphUpdate, width, graphLoading} = this.state;\n    const widthToUse = this.mobileVersion ? width : (width - (380 + 48));\n    const allowNyc = this.filterSetttings.city.indexOf('nyc') > -1;\n    const allowChicago = this.filterSetttings.city.indexOf('chicago') > -1;\n    const allowLosAngeles = this.filterSetttings.city.indexOf('losAngeles') > -1;\n    return (\n      <div className=\"primary-content\">\n        {graphLoading && this.graphLoadingScreen}\n        <h1>Pedestrian and Cyclist Accidents In New York City Compared to other Major Cities</h1>\n        <p>Being a pedestrian and cyclist in New York City can be dangerous with the high population and number of vehicles on the road.  New York City has made several efforts to make the streets safer for all and this visualization hopes to explore how efforts to improve the city’s streets for non-automobiles has worked out and also evaluate the most dangerous times of the day for pedestrians and cyclist.  Filters on the right side of the page are available to fine tune the data for your specific case.  This allows you to find the safest time for biking to school or work based on your age group.  As well as filtering for killed, injured or accident but no injuries.  You can also include data from other major cities like Los Angeles or Chicago for comparative data.</p>\n        <p>To start this evaluation, we will look at the times of the day and see which have the most accidents and explore the reasons.  The stacked bar graph below shows the total accidents for each time frame.</p>\n        <GraphTimeStackedBar data={this.getDataToUse()} forceUpdate={forceGraphUpdate} width={widthToUse} />\n        <p>Viewing the graph, we can see that the evening from 4-8 pm (16-20h) is the most dangerous time.  Accounting for nearly 35% of all accidents this has the most accidents.  The morning commute hours account for the second largest group of accidents.  Accidents during the commute hours make sense as they would have the most traffic of any part of the day; the range is larger but over the last 30 years the range of commute times has grown in New York City <a href=\"https://www.nytimes.com/1987/09/09/nyregion/new-york-rush-hours-grow-earlier-and-later.html\" rel=\"noreferrer\" target=\"_blank\">(New York Times, 1987)</a>.  It is also important to consider the number of New York City residents. With over 8 million residents in the five boroughs of New York City <a href=\"https://www.nbcnewyork.com/news/local/new-york-city-historic-population-8-million-people-census/447194/\" rel=\"noreferrer\" target=\"_blank\">(NBC New York, 2018)</a> it is the most populous city in the United States.</p>\n        <br />\n        <GraphTimeGraphics data={this.getDataToUse()} forceUpdate={forceGraphUpdate} width={widthToUse} />\n        <p>Commute times cause the most accidents by statistics alone, but the blame usually falls on the drivers of automobiles.  Drivers usually driving too fast for the city’s 25 mph speed limit or attempting to dangerously pass cyclist or pedestrians.  Larger vehicles have also been a concern as more and more people drive trucks and SUVs that are more likely to cause serious damage if involved in a pedestrian accident.  The rise of delivery services has also increased the number of large trucks who also are frequently seen blocking bike paths and causing cyclist to enter into main traffic lanes.  The frightening increase in accidents have prompted the city to consider new ways to deal with the issue and looking to follow other cities who have created programs to focus on bringing down the number of accidents <a href=\"https://www.nytimes.com/2020/03/10/nyregion/nyc-deaths-pedestrian-cycling.html\" rel=\"noreferrer\" target=\"_blank\">(New York Times, 2020)</a>. </p>\n        <h2>Vizion Zero</h2>\n        <p>Vision Zero is the philosophy that all deaths are preventable and has had great success in many European cities.  It has been adopted by several cities across the United States.  In 2014 New York City adopted it with the hopes to have a city with zero deaths from traffic accidents.  The plan focuses on improving infrastructure around the city to make it safer for pedestrians, including better crosswalks, divided bike trails from roadways and more accessible crosswalk systems.  The plan also raises penalties for drivers who violate the rules of the road or leave the scene of an accident and adds more traffic cameras to penalize drivers who violate the law and put the life of pedestrians and cyclist in danger.  The city also improved their own vehicles by adding cyclist guards to sides of large trucks, and prosecuting bus drivers as normal drivers if they cause an at-fault accident <a href=\"https://www1.nyc.gov/assets/visionzero/downloads/pdf/vision-zero-year-6-report.pdf\" rel=\"noreferrer\" target=\"_blank\">(Vision Zero 6 Year Report, 2020)</a>.</p>\n        {this.listOfVisionZeroChanges}\n        <p>The graph below shows the total accidents based on current filters for New York City; or other cities if toggled in the filters.  New York City’s Open Data started logging the data in 2016 so unfortunately changes from the initial year of Vision Zero are not shown here.  March 2020 was the start of the stay-at-home orders due to the COVID-19 pandemic which shows a massive drop in accidents.</p>\n        <GraphVisionZeroLine nycData={allowNyc ? this.getDataToUse('nyc') : []} chicagoData={allowChicago ? this.getDataToUse('chicago') : []} laData={allowLosAngeles ? this.getDataToUse('losAngeles') : []} forceUpdate={forceGraphUpdate} width={widthToUse} />\n        <h2>How New York City Compares to other Cities</h2>\n        <p>The graph above shows the number of accidents over the time, based on available public data.  The data shows not much change for pedestrians.  While New York City seems to state the success the numbers of pedestrian accidents have stayed relatively high.  The same pattern has been seen in other Vision Zero cities like Los Angeles <a href=\"https://www.latimes.com/california/story/2020-02-05/vision-zero-los-angeles-traffic-collisions-deaths-2019\" rel=\"noreferrer\" target=\"_blank\">(Los Angeles Times, 2020)</a> and Chicago <a href=\"https://chi.streetsblog.org/2020/02/13/chicago-saw-a-20-drop-in-traffic-deaths-in-2019-but-little-decrease-in-ped-fatalities/\" rel=\"noreferrer\" target=\"_blank\">(Streets Blog Chicago, 2020)</a> where pedestrian accidents have stayed stubbornly high.  From New York City police data most accidents are caused by the driver either from drivers not paying attention or failing to yield to pedestrians or cyclist <a href=\"https://www.nytimes.com/2020/03/10/nyregion/nyc-deaths-pedestrian-cycling.html\" rel=\"noreferrer\" target=\"_blank\">(New York Time, 2020)</a>.   Unfortunately, this means the cities can improve the infrastructures of their city to protect pedestrians and cyclist and make it clearer for drivers but if the drivers do not stop or watch the road, they will still end up causing accidents.  New York City has focused in recent years on ticketing drivers more for accidents and violating traffic laws, which will probably be the most efficient way to handle the situation.  The bars below show the comparison of total accidents in each city.  The data only includes accidents after 2016 to match the available data from New York City and Chicago.  It important to note that Los Angeles has about half the population of New York City making the aggregated data by population very similar across the three cities.  However, the goal is to have zero deaths; meaning that New York City has a very long way to go.</p>\n        <GraphCityCompare nycData={this.getDataToUse('nyc')} chicagoData={this.getDataToUse('chicago')} laData={this.getDataToUse('losAngeles')} forceUpdate={forceGraphUpdate} width={widthToUse} />\n        <h2>Conclusion</h2>\n        <p>The numbers presented here are saddening.  Many lives lost and impacted by drivers not paying attention or failure to yielding to others.  Vision Zero has a long way to go and from its initial plan of 10 years only has 4 years left to get to zero.  At the current pace it does not seem likely.  The data shows that no one group is affected more than the other and all young and old are involved in accidents with motor vehicles.  While in a few cases cyclists or pedestrians are at fault, however, most of the time it is distracted drivers.  I truly hope the city can become safer as we continue to improve infrastructure and provide more isolated places for pedestrians and cyclists and hopefully drivers will slow down and pay attention when driving to ensure that everyone can get home safely every day.</p>\n      </div>\n    );\n  }\n\n  render(): React.ReactNode {\n    const {loading, error} = this.state;\n\n    if (error) {\n      return this.error;\n    } else if (loading) {\n      return this.loading;\n    } else {\n      return (\n        <div className={`main-layout ${this.mobileVersion ? 'mobile-styles' : ''}`}>\n          {this.mobileVersion && (\n            <div className=\"mobile-filter-toggle\">\n              <Button\n                type=\"primary\"\n                onClick={(): void => {\n                  this.setState({filterOpen: true});\n                }}>View Filters</Button>\n            </div>\n          )}\n          {this.primaryContent}\n          {this.filterDrawer}\n        </div>\n      );\n    }\n\n  }\n}\n","import './index.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}